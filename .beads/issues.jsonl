{"id":"moltid-0x3","title":"PATCH ENDPOINT: In src/routes/agents.ts - add PATCH /v1/agents/:id with requireAgentAuth, accept {capabilities}, validate with Zod, call updateCapabilities(), return updated agent","status":"closed","priority":2,"issue_type":"task","owner":"hatzopoulosalexandros@gmail.com","created_at":"2026-01-30T16:03:09.203449-08:00","created_by":"Alexandros Hatzopoulos","updated_at":"2026-01-30T16:23:51.423755-08:00","closed_at":"2026-01-30T16:23:51.423755-08:00","close_reason":"Closed"}
{"id":"moltid-1sa","title":"CAPABILITIES UPDATE: In src/services/agent.ts - add updateCapabilities(id, capabilities) with validation (max 20 items, lowercase a-z0-9_, max 50 chars each, no duplicates)","status":"closed","priority":2,"issue_type":"task","owner":"hatzopoulosalexandros@gmail.com","created_at":"2026-01-30T16:03:05.8641-08:00","created_by":"Alexandros Hatzopoulos","updated_at":"2026-01-30T16:16:01.786052-08:00","closed_at":"2026-01-30T16:16:01.786052-08:00","close_reason":"Closed"}
{"id":"moltid-5rc","title":"DATABASE SCHEMA: Add api_key_hash (TEXT) and api_key_prefix (TEXT, 16 chars) columns to agents table in src/db/schema.sql","status":"closed","priority":2,"issue_type":"task","owner":"hatzopoulosalexandros@gmail.com","created_at":"2026-01-30T16:02:55.244764-08:00","created_by":"Alexandros Hatzopoulos","updated_at":"2026-01-30T16:04:18.930496-08:00","closed_at":"2026-01-30T16:04:18.930496-08:00","close_reason":"Closed"}
{"id":"moltid-5yn","title":"REGISTRATION RESPONSE: In src/routes/agents.ts - update POST /v1/agents to return api_key and api_key_warning in response data","status":"closed","priority":2,"issue_type":"task","owner":"hatzopoulosalexandros@gmail.com","created_at":"2026-01-30T16:03:10.523327-08:00","created_by":"Alexandros Hatzopoulos","updated_at":"2026-01-30T16:17:59.905249-08:00","closed_at":"2026-01-30T16:17:59.905249-08:00","close_reason":"Implemented auth middleware and updated registration response"}
{"id":"moltid-9nx","title":"KEY VALIDATION: In src/services/agent.ts - add validateApiKey(agentId, apiKey) method with timing-safe hash comparison","status":"closed","priority":2,"issue_type":"task","owner":"hatzopoulosalexandros@gmail.com","created_at":"2026-01-30T16:02:57.159805-08:00","created_by":"Alexandros Hatzopoulos","updated_at":"2026-01-30T16:16:01.784317-08:00","closed_at":"2026-01-30T16:16:01.784317-08:00","close_reason":"Closed"}
{"id":"moltid-9p8","title":"TESTS: Update test/setup.ts, test/agent.test.ts, test/api.test.ts with tests for key generation, validation, capabilities update, PATCH endpoint, vouch auth","status":"closed","priority":2,"issue_type":"task","owner":"hatzopoulosalexandros@gmail.com","created_at":"2026-01-30T16:03:16.606547-08:00","created_by":"Alexandros Hatzopoulos","updated_at":"2026-01-30T16:32:41.893522-08:00","closed_at":"2026-01-30T16:32:41.893522-08:00","close_reason":"Closed"}
{"id":"moltid-ap9","title":"Fix createTestVouch ID collision in tests","description":"The createTestVouch function in test/setup.ts generates IDs using Date.now() which can collide when called multiple times in quick succession (within the same millisecond). This causes the 'counts vouches from verified agents only' test to fail intermittently. Consider using nanoid or adding a counter/random suffix.","status":"closed","priority":3,"issue_type":"bug","owner":"hatzopoulosalexandros@gmail.com","created_at":"2026-01-30T16:13:59.445486-08:00","created_by":"Alexandros Hatzopoulos","updated_at":"2026-01-30T16:32:41.892223-08:00","closed_at":"2026-01-30T16:32:41.892223-08:00","close_reason":"Closed"}
{"id":"moltid-cf2","title":"TYPE SYSTEM: Update src/types.ts - add api_key_hash and api_key_prefix to Agent interface, create AgentRegistrationResult type","status":"closed","priority":2,"issue_type":"task","owner":"hatzopoulosalexandros@gmail.com","created_at":"2026-01-30T16:02:55.34878-08:00","created_by":"Alexandros Hatzopoulos","updated_at":"2026-01-30T16:05:30.1247-08:00","closed_at":"2026-01-30T16:05:30.1247-08:00","close_reason":"Completed: Added api_key_hash and api_key_prefix to Agent interface, created AgentRegistrationResult type"}
{"id":"moltid-d4i","title":"DOCUMENTATION: Update SKILL_MD in src/index.ts with Authentication section, PATCH endpoint docs, updated vouch docs, key storage warnings","status":"closed","priority":2,"issue_type":"task","owner":"hatzopoulosalexandros@gmail.com","created_at":"2026-01-30T16:03:18.122507-08:00","created_by":"Alexandros Hatzopoulos","updated_at":"2026-01-30T16:32:12.896391-08:00","closed_at":"2026-01-30T16:32:12.896391-08:00","close_reason":"Closed"}
{"id":"moltid-e2t","title":"KEY ROTATION (OPTIONAL): Add POST /v1/agents/:id/rotate-key endpoint with auth, generate new key, invalidate old, return new key one-time","status":"closed","priority":2,"issue_type":"task","owner":"hatzopoulosalexandros@gmail.com","created_at":"2026-01-30T16:03:19.640846-08:00","created_by":"Alexandros Hatzopoulos","updated_at":"2026-01-30T16:29:58.469685-08:00","closed_at":"2026-01-30T16:29:58.469685-08:00","close_reason":"Closed"}
{"id":"moltid-ee1","title":"Fix test fixtures missing api_key_hash and api_key_prefix fields","status":"closed","priority":2,"issue_type":"bug","owner":"hatzopoulosalexandros@gmail.com","created_at":"2026-01-30T16:15:56.246989-08:00","created_by":"Alexandros Hatzopoulos","updated_at":"2026-01-30T16:32:41.890555-08:00","closed_at":"2026-01-30T16:32:41.890555-08:00","close_reason":"Closed"}
{"id":"moltid-jgo","title":"VOUCH AUTH (BREAKING): In src/routes/agents.ts - add requireAgentAuth to POST /:id/vouch, derive from_agent_id from authenticated context instead of request body","status":"closed","priority":2,"issue_type":"task","owner":"hatzopoulosalexandros@gmail.com","created_at":"2026-01-30T16:03:14.993942-08:00","created_by":"Alexandros Hatzopoulos","updated_at":"2026-01-30T16:23:51.425779-08:00","closed_at":"2026-01-30T16:23:51.425779-08:00","close_reason":"Closed"}
{"id":"moltid-lqv","title":"AUTH MIDDLEWARE: In src/routes/agents.ts - create requireAgentAuth middleware extracting Bearer token, validating key against agent from :id param, return 401 for missing/invalid","status":"closed","priority":2,"issue_type":"task","owner":"hatzopoulosalexandros@gmail.com","created_at":"2026-01-30T16:03:07.555587-08:00","created_by":"Alexandros Hatzopoulos","updated_at":"2026-01-30T16:17:59.903351-08:00","closed_at":"2026-01-30T16:17:59.903351-08:00","close_reason":"Implemented auth middleware and updated registration response"}
{"id":"moltid-q6q","title":"KEY GENERATION: In src/services/agent.ts - add hashApiKey() utility using Web Crypto SHA-256, modify create() to generate moltid_key_{nanoid(32)}, hash it, store hash+prefix, return {agent, apiKey}","status":"closed","priority":2,"issue_type":"task","owner":"hatzopoulosalexandros@gmail.com","created_at":"2026-01-30T16:02:56.266705-08:00","created_by":"Alexandros Hatzopoulos","updated_at":"2026-01-30T16:14:12.10519-08:00","closed_at":"2026-01-30T16:14:12.10519-08:00","close_reason":"Implemented API key generation with SHA-256 hashing, updated create() to return AgentRegistrationResult, added tests"}
